import React, { useState, useEffect, useRef } from 'react';
import './App.css';

const App = () => {
  const data = [{ name: 'Measurment', number: '0' }];
  const [state, setState] = useState(data);
  const webSocket = useRef(null);
  // const history_data = []

  const receiveMessage = (message) => {
    // Eventually we will have multiple states which we assign to,
    // For example state for each sensor
    setState(JSON.parse(message.data));
  };

  useEffect(() => {
    webSocket.current = new WebSocket('ws://127.0.0.1:8888/');
    webSocket.current.onmessage = (message) => receiveMessage(message);
    return () => webSocket.current.close();
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <div className="Logo-wrapper">
          <svg width="92" height="92" viewBox="0 0 92 92" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M92 45.6689C92 45.2165 91.6328 44.8493 91.1804 44.8493H91.123C91.1738 44.6895 91.1935 44.5223 91.1427 44.3575L84.381 22.843C84.2695 22.4923 83.9204 22.2415 83.5737 22.2693C83.2073 22.2808 82.8918 22.5349 82.8041 22.8914L77.857 42.865L72.5403 36.691C72.3763 36.4992 72.1272 36.3984 71.8788 36.4066C71.6264 36.4189 71.3928 36.5467 71.2486 36.7533L70.8707 37.2901L68.8971 31.0079C68.8193 30.7628 68.6037 30.603 68.3324 30.6063C68.0751 30.6145 67.8546 30.7923 67.7931 31.0415L65.263 41.2611L57.8194 31.271C57.6522 31.0464 57.3867 30.9235 57.1006 30.944C56.8203 30.9653 56.5712 31.1284 56.4384 31.3767L52.1675 39.4112L50.3045 36.9098C50.1857 36.7525 50.0021 36.6721 49.8005 36.6803C49.6054 36.6959 49.4308 36.8098 49.3382 36.9836L48.0351 39.4342L35.4591 19.5753C35.1592 19.1007 34.3748 19.1007 34.0748 19.5753L29.6662 26.5362L22.6906 12.3636C22.5529 12.0833 22.2677 11.9055 21.9554 11.9055C21.9538 11.9055 21.953 11.9055 21.9513 11.9055C21.6374 11.9071 21.3522 12.0883 21.217 12.371L11.9571 31.7054L10.0958 27.8549C9.95649 27.5656 9.6557 27.3812 9.34097 27.3918C9.02051 27.3984 8.73283 27.5918 8.60579 27.886L1.50233 44.278C1.42282 44.4616 1.41627 44.664 1.47446 44.8493H0.819599C0.36718 44.8493 0 45.2165 0 45.6689C0 45.7877 0 46.2123 0 46.3319C0 46.7835 0.36718 47.1515 0.819599 47.1515H0.877791C0.826156 47.3105 0.806486 47.4777 0.857301 47.6433L7.61899 69.1578C7.72964 69.5086 8.07879 69.7594 8.4263 69.7307C8.79348 69.7192 9.1082 69.4651 9.19672 69.1086L14.143 49.135L19.4597 55.3082C19.6245 55.4991 19.8728 55.6 20.1212 55.5926C20.3736 55.5803 20.6064 55.4533 20.7514 55.2467L21.1284 54.7091L23.1029 60.9921C23.1799 61.2372 23.3963 61.397 23.6676 61.3937C23.9249 61.3847 24.1454 61.2068 24.2069 60.9585L26.737 50.7389L34.1806 60.7282C34.3478 60.9528 34.6133 61.0757 34.8993 61.0552C35.1797 61.0331 35.4288 60.87 35.5608 60.6216L39.8317 52.5871L41.6955 55.0893C41.8135 55.2459 41.9979 55.3262 42.1995 55.318C42.3954 55.3024 42.57 55.1885 42.6626 55.0156L43.9649 52.565L56.5409 72.4239C56.8417 72.8976 57.626 72.8976 57.9252 72.4239L62.3338 65.4622L69.3102 79.6355C69.4479 79.9158 69.7331 80.0937 70.0446 80.0937C70.0462 80.0937 70.047 80.0937 70.0487 80.0937C70.3634 80.092 70.6478 79.9109 70.783 79.6282L80.0412 60.2954L81.9025 64.1459C82.0419 64.4352 82.3427 64.6188 82.6582 64.609C82.9787 64.6024 83.2655 64.409 83.3926 64.114L90.496 47.722C90.5755 47.5376 90.5813 47.3359 90.5239 47.1507H91.1788C91.6312 47.1507 91.9984 46.7844 91.9984 46.3311C92 46.2114 92 45.7877 92 45.6689ZM66.1498 42.4544L68.416 33.3036L70.0405 38.4728L72.0444 44.8485H65.5564L66.1498 42.4544ZM60.22 42.0102L62.6633 44.8485H58.2227L60.22 42.0102ZM48.7407 40.5513L49.9251 38.3236L51.5725 40.5341L54.7886 44.8493H46.4557L48.7407 40.5513ZM16.4067 36.1451L17.6837 38.7875C17.7796 38.9859 17.9804 39.1121 18.2 39.1121H18.2008C18.4213 39.1121 18.6221 38.985 18.7172 38.7859L25.2027 25.2428L30.0162 35.0223C30.108 35.2083 30.2924 35.3305 30.4997 35.3419C30.7087 35.3518 30.9046 35.251 31.0153 35.0756L34.1642 30.1039L43.5035 44.8501H12.6349L16.4067 36.1451ZM25.8502 49.5448L23.584 58.6948L21.9595 53.5256L19.9556 47.1499H26.4427L25.8502 49.5448ZM31.78 49.9882L29.3367 47.1499H33.7773L31.78 49.9882ZM43.2593 51.4479L42.0749 53.6764L40.4275 51.4659L37.2123 47.1499H45.5435L43.2593 51.4479ZM75.5933 55.854L74.3155 53.2117C74.2196 53.0133 74.0196 52.8871 73.7992 52.8871H73.7983C73.577 52.8871 73.3771 53.0141 73.282 53.2133L66.7973 66.7563L61.9838 56.9769C61.8928 56.7908 61.7076 56.6687 61.5003 56.6564C61.2913 56.6466 61.0954 56.7474 60.9847 56.9236L57.8358 61.8945L48.4957 47.1499H79.3651L75.5933 55.854Z" fill="#565656" />
          </svg>
        </div>
        <h2 className="Header-title">WizCrunch</h2>
        <div className="Device-status-nav">
          <div className="Device-status-wrapper">
            <div className="Device-logo">
              <svg width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <path d="M35.3349 1.77051C35.1176 0.725019 34.1859 -0.020282 33.1197 0.000420808H19.87C18.8038 -0.020282 17.8721 0.725019 17.6651 1.77051L15.895 9.0579H37.1568L35.3349 1.77051Z" fill="#424242" />
                  <path d="M15.8433 43.9421L17.6548 51.2295C17.8721 52.275 18.7934 53.0203 19.8596 52.9996H33.1094C34.1756 53.0203 35.1072 52.275 35.3142 51.2295L37.0843 43.9421H15.8433Z" fill="#424242" />
                  <rect x="11.2424" y="11.2424" width="30.5152" height="31.3182" rx="8" fill="#424242" />
                  <ellipse cx="19.2728" cy="20.0758" rx="4.81818" ry="4.81818" fill="#313131" />
                </g>
                <defs>
                  <clipPath id="clip0">
                    <rect width="53" height="53" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <h2 className="Device-title">Empirica E4</h2>
          </div>
          <div className="Device-status-wrapper">
            <div className="Device-logo">
              <svg width="63" height="63" viewBox="0 0 63 63" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <path d="M62.5296 30.2689C61.9673 29.6416 48.4414 14.8887 31.5001 14.8887C14.5587 14.8887 1.03292 29.6416 0.47047 30.2689C-0.156823 30.97 -0.156823 32.03 0.47047 32.7311C1.03292 33.3584 14.559 48.1113 31.5001 48.1113C48.4412 48.1113 61.9672 33.3584 62.5296 32.7311C63.1568 32.03 63.1568 30.97 62.5296 30.2689ZM31.5001 44.4199C24.3768 44.4199 18.5801 38.6233 18.5801 31.5C18.5801 24.3767 24.3768 18.5801 31.5001 18.5801C38.6234 18.5801 44.42 24.3767 44.42 31.5C44.42 38.6233 38.6234 44.4199 31.5001 44.4199Z" fill="#424242" />
                  <path d="M33.3457 27.8086C33.3457 25.9518 34.2674 24.3184 35.6697 23.3137C34.4114 22.6695 33.0079 22.2715 31.5 22.2715C26.4116 22.2715 22.2715 26.4116 22.2715 31.5C22.2715 36.5884 26.4116 40.7285 31.5 40.7285C36.0557 40.7285 39.8263 37.4021 40.5713 33.0556C36.8545 34.2522 33.3457 31.4412 33.3457 27.8086Z" fill="#424242" />
                </g>
                <defs>
                  <clipPath id="clip0">
                    <rect width="63" height="63" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <h2 className="Device-title">Tobii</h2>
          </div>
          <div className="Device-status-wrapper">
            <div className="Device-logo">
              <svg width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <path d="M28.4182 5.41088C28.4182 2.42715 25.991 0 23.0077 0C20.0236 0 17.5964 2.42715 17.5964 5.41088C17.5964 8.39462 20.0236 10.8218 23.0077 10.8218C25.991 10.8218 28.4182 8.39428 28.4182 5.41088ZM19.9392 5.41088C19.9392 3.71904 21.3158 2.34281 23.0077 2.34281C24.6995 2.34281 26.0754 3.71904 26.0754 5.41088C26.0754 7.10272 24.6995 8.47896 23.0077 8.47896C21.3158 8.47896 19.9392 7.10239 19.9392 5.41088Z" fill="#424242" />
                  <path d="M47.3441 21.9601C47.9315 21.6884 48.146 21.0096 47.9154 20.4052C42.4624 6.13782 20.363 13.8734 20.363 13.8734C19.7395 14.0398 19.368 14.679 19.5323 15.3029L24.1061 32.7066C24.244 33.2327 24.8086 33.6936 25.5362 33.542C26.1701 33.4094 26.5363 32.7374 26.3716 32.1119L22.0947 15.837C22.0947 15.837 40.5654 9.54091 45.7891 21.3892C46.0509 21.9809 46.7574 22.2312 47.3441 21.9601Z" fill="#424242" />
                  <path d="M17.7638 17.1808C17.1172 17.1808 16.5924 17.7053 16.5924 18.3522C16.5924 20.9571 16.587 25.2809 8.29451 26.7017L7.29446 23.078C7.12243 22.4545 6.47816 22.089 5.85364 22.2604C5.23012 22.4334 4.86397 23.0773 5.036 23.7015L7.7068 33.38C7.85004 33.8998 8.26773 34.5246 9.07734 34.3633C9.92744 34.1946 10.1373 33.38 9.96526 32.7561L8.92071 28.9715C17.7735 27.3747 18.9352 22.4799 18.9352 18.3519C18.9352 17.7053 18.4114 17.1808 17.7638 17.1808Z" fill="#424242" />
                  <path d="M26.9365 37.7928C29.594 37.2182 31.509 35.9313 32.6289 33.9667C34.5885 30.5285 33.3113 26.2776 33.1661 25.8244L30.7188 16.9562C30.5465 16.3324 29.9025 15.9666 29.2777 16.1386C28.6545 16.311 28.288 16.9556 28.4604 17.5794L30.9143 26.4727C30.9203 26.4908 30.925 26.5112 30.9317 26.5289C30.9431 26.5648 32.1008 30.1757 30.5883 32.816C29.8112 34.1719 28.4162 35.0758 26.4415 35.5026C23.8333 36.0669 21.9755 37.4009 20.9185 39.4693C18.405 44.3895 21.5488 51.6807 21.6833 51.9886C21.8761 52.4277 22.3262 53.0311 23.256 52.8019C24.1031 52.5927 24.088 51.6415 23.8293 51.0498C23.8005 50.9842 20.9962 44.4598 23.007 40.5309C23.7389 39.1021 25.0235 38.2068 26.9365 37.7928Z" fill="#424242" />
                  <path d="M42.4446 50.6927C32.0282 47.8944 29.3068 40.235 29.1944 39.9037C28.9885 39.2929 28.3262 38.9629 27.7137 39.1664C27.0999 39.3709 26.7679 40.0349 26.9721 40.648C27.0962 41.0209 30.1509 49.8171 41.8358 52.9552C41.9386 52.9826 42.8877 53.2413 43.2713 52.1281C43.4832 51.5163 43.0695 50.8607 42.4446 50.6927Z" fill="#424242" />
                </g>
                <defs>
                  <clipPath id="clip0">
                    <rect width="53" height="53" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <h2 className="Device-title Device-active">openPose</h2>
          </div>
        </div>
      </header>
      <div className="Main-content">
        {state.map((measurment) => (
          <div className="Measurment">
            <div className="Measurment-number-wrapper">
              <h3 className="Measurment-number">{measurment.number}</h3>
            </div>
            <h3 className="Measurment-text">{measurment.name}</h3>
          </div>
        ))}
      </div>
    </div>
  );
};

export default App;
